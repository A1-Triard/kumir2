<?xml version='1.0' encoding='UTF-8'?>
<chapter>
    <title>Главное окно системы &quot;Кумир&quot;</title>
    <section>
        <title>Общий вид главного окна</title>
        <para>
            После запуска Кумира на экране появляется главное окно системы Кумир. Главное окно
            открывается при начале сеанса работы системы Кумир и закрывается в момент окончания сеанса работы.
            Иногда мы будем называть это окно рабочим, поскольку основная работа с
            системой происходит именно в этом окне.
            </para>
        <para>
            Главное окно системы Кумир имеет стандартный вид. Вверху окна расположены заголовок окна,
            главное меню и панель инструментов; снизу -- строка состояния. Заголовок
            окна содержит полное имя файла, из которого была загружена основная программа. Строка состояния
            используется для вывода сообщений, показа положения курсора, состояния
            системы и&nbsp;т.&nbsp;п.
            </para>
        <para>
            При работе с окном доступны стандартные возможности управления окнами: окно
            можно свернуть/развернуть, сжать/растянуть, передвинуть и&nbsp;др. При закрытии окна его
            параметры (например, размеры и положение) запоминаются; при следующем запуске окно
            открывается с теми же параметрами.
        </para>
        <mediaobject>
            <imageobject>
                <imagedata format="PNG" fileref="kumir-classic-mainwindow.png"/>
            </imageobject>
            <imageobject>
                <imagedata format="PDF" fileref="kumir-classic-mainwindow.pdf"/>
            </imageobject>
            <caption>Главное окно системы Кумир. Штрихпунктирной линией обозначены внутренние границы
            окна, которые можно перемещать с помощью мыши</caption>
        </mediaobject>
        <para>
        Главное окно разбито на две основные области: <emphasis role="italic">рабочую область</emphasis> (вверху) и
            область <emphasis role="italic">ввода-вывода</emphasis> (внизу).
        </para>
        <para>
            В рабочей области располагается программа, с которой в данный момент работает система Кумир. При этом
            рабочая область делится на две части: <emphasis role="italic">область редактирования текста программы</emphasis>
            (слева) и область построчных сообщений -- <emphasis role="italic">поля редактора</emphasis> (справа).
            Эта область аналогична &quot;полям&quot; в ученических тетрадях. В нее при подготовке программы выводятся
            сообщения об ошибках, найденных в каждой строке, а при выполнении -- сведения о значаниях величин,
            которым присваиваются значения в соответствующих строках.
        </para>
        <para>
            Границы между областями можно перемещать с помощью мыши при нажатой ее левой клавиши (на рисунке выше
            перемещаемые границы обозначены штрихпунктирной линией). При этом область ввода-вывода может быть полностью
            скрыта, -- в этом случае она автоматически появляется при выполнении операторов
            <code language="kumir">ввод</code> или <code language="kumir">вывод</code> во время выполения программы.
        </para>
    </section>
    <section>
        <title>Главное меню системы &quot;Кумир&quot;</title>
        <para>
            Главное меню системы содержит семь <emphasis role="italic">основных</emphasis> пунктов и некоторое количество
            пунктов, которые могут меняться в зависимости от поставки системы. Каждому из этих пунктов соостветствует
            свое раскрывающееся меню.
        </para>
        <section>
            <title>Меню &quot;Программа&quot;</title>
            <para>
                Меню <guimenu>Программа</guimenu> содержит действия для работы с файлами Кумир-программ, которые имеют
                суффикс имени <code>.kum</code>.
                <orderedlist>
                    <listitem>
                        <para><guimenuitem>Новая программа</guimenuitem> -- создает новую пустую программу в соответствии
                        с установленным шаблоном</para>
                    </listitem>
                    <listitem>
                        <para><guimenuitem>Загрузать программу</guimenuitem> -- отображает диалог выбора файла для
                        загрузки программы</para>
                    </listitem>
                    <listitem>
                        <para><guimenu>Недавние программы</guimenu> -- открывает вложенное подменю, содержащее элементы
                            для быстрого открытия последних программ (не более 10 элементов)</para>
                    </listitem>
                    <listitem>
                        <para><guimenuitem>Сохранить программу</guimenuitem> -- если программа была загружена из файла или
                            ранее уже была сохранена в файл, то сохраняет текущую программу, перезаписывая исходный файл;
                            в противном случае отображает диалог выбора имени файла для сохранения программы
                        </para>
                    </listitem>
                    <listitem><para>
                        <guimenuitem>Сохранить программу как</guimenuitem> -- отображает диалог выбора имени
                        файла для сохранения текущей программы
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Выбор каталога пользователя</guimenuitem> -- отображает диалог изменения
                        текущего рабочего каталога
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Настройки</guimenuitem> -- отображает диалог изменения настроек системы
                        &quot;Кумир&quot;
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Выход</guimenuitem> -- завершает работу с системой &quot;Кумир&quot;.
                    </para></listitem>
                </orderedlist>
            </para>
        </section>
        <section>
            <title>Меню &quot;Редактирование&quot;</title>
            <para>Редактор системы Кумир обеспечивает стандартные средства редактирования текстов:
                ввод символов в режиме вставки или замены, удаление символов, выделение / копирование /
                вставку / удаление фрагмента текста, &quot;откатку&quot; (отмену последних действий) и
                &quot;накатку&quot; (отмену откатки), поиск по тексту и&nbsp;т.&nbsp;д. Эти действия можно выполнять как в
                непосредственном режиме, так и с помощью меню <guimenu>Редактирование</guimenu>. Кроме того, редактор
                программ системы Кумир предоставляет пользователю дополнительные возможности,
                ориентированные на специфику языка Кумир.
                <orderedlist>
                    <listitem><para>
                        <guimenuitem>Отменить последнее действие</guimenuitem> -- отменяет последнее выполненное действие,
                        которое привело к изменению текста в области редактирования
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Повторить отмененное действие</guimenuitem> -- если последней операцией,
                        изменившей текст в области редактирования, была &quot;откатка&quot; изменений, то
                        повторяет отмененное действие; в противном случае, этот пункт меню недоступен
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Выбрать весь текст</guimenuitem> -- устанавливает выделение от начала текста
                        до его конца
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Вырезать</guimenuitem> -- удаляет выделенную часть текста, сохраняя при этом
                        удаленный текст в системном <emphasis role="italic">буфере обмена</emphasis>
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Скопировать</guimenuitem> -- копирует выделенную часть текста в
                        системный буфер обмена
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Вставить</guimenuitem> -- вставляет в текущее положение текстового курсора
                        текст из системного буфера обмена, перемещая при этом курсор вперед на количество вставленных
                        символов
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Найти</guimenuitem> -- отображает панель поиска текста
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Заменить</guimenuitem> -- отображает панель поиска текста и переключает ее в режим
                        отображения опций замены
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Удалить строку</guimenuitem> -- полностью удаляет текстовую строку, в которой
                        находится курсор
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Удалить текст до конца строки</guimenuitem> -- удаляет фрагмент текста в строке от первого
                        символа после курсора до конца строки
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>(Рас)комментировать строки</guimenuitem> -- если текущая строка не начинается с
                        символа комментария, то вставляет символ комментария в начало строки, иначе -- убирает его.
                        Если выделен фрагмент текста, то данная операция производится ко всем строкам, которые затрагивает
                        выделение
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Запись последовательности нажатий клавиш</guimenuitem> -- начинает запись
                        последовательности нажатий клавиш, при этом в строке состояния главного окна рядом с надписью
                        &quot;Редактирование&quot; появляется красный (для темной темы оформления -- оранжевый) круглый
                        индикатор. Повторная активация этого пункта меню приводит к завершению записи последовательности
                        и отображает диалог назначения имени и комбинации клавиш для записанной последовательности
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Изменить записанные последовательности</guimenuitem> -- если ранее были записаны
                        последовательности нажатий клавиш, то этот пункт меню становится доступен, а его активация
                        приводит к отображению диалога редактирования свойств записанных последовательностей.
                    </para></listitem>
                </orderedlist>
            </para>
        </section>
        <section>
            <title>Меню &quot;Вставка&quot;</title>
            <para>Меню <guimenu>Вставка</guimenu> содержит две группы действий:
                <orderedlist>
                    <listitem><para>Операции вставки конструкций используемого языка программирования</para></listitem>
                    <listitem><para>Операции выполнения записанных ранее последовательностей нажатий клавиш.</para></listitem>
                </orderedlist>
            </para>
        </section>
        <section>
            <title>Меню &quot;Выполнение&quot;</title>
            <para>Элементами меню <guimenu>Выполнение</guimenu> являются действия по запуску и остановке
            выполнения текущей программы:
                <orderedlist>
                    <listitem><para><guimenuitem>Без показа на полях</guimenuitem>
                    -- запуск программы в ускоренном выполнении, при котором на полях не отображаются
                        значения изменяемых величин
                    </para></listitem>
                    <listitem><para><guimenuitem>Обычное выполнение</guimenuitem>
                    -- запуск программы в обычном режиме, при котором на полях редактора отображаются
                        значения изменяемых величин
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Запустить тестирование</guimenuitem>
                        -- выполнение специального тестирующего алгоритма
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Остановить выполнение</guimenuitem>
                        -- принудительно останавливает выполнение программы до ее завершения
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>ШАГ</guimenuitem> -- в режиме паузы выполняет очередную строку; если выполнение
                        программы еще не началось, то запускает выполнение в пошаговом режиме
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>шаг</guimenuitem> -- в режиме паузы выполняет очередную строку; если выполнение
                        программы еще не началось, то запускает выполнение в пошаговом режиме.
                        В отличии от действия <guimenuitem>ШАГ</guimenuitem>, если очередная инструкция является
                        вызовом алгоритма или функции, то активация действия <guimenuitem>шаг</guimenuitem>
                        приводит к пошаговому выполнению вызываемого алгоритма
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>До конца алгоритма</guimenuitem>
                        -- в режиме паузы запускает выполнение программы до конца текущего алгоритма, после чего
                        выполнение приостанавливается.
                    </para></listitem>
                </orderedlist>
            </para>
        </section>
        <section>
            <title>Меню &quot;Окна&quot;</title>
            <para>Меню <guimenu>Окна</guimenu> содержит действия отображения дополнительных окон системы &quot;Кумир&quot;,
                которые реализуются <emphasis role="italic">исполнителями</emphasis>. Помимо этого, данное меню
                содержит два действия:
                <orderedlist>
                    <listitem><para>
                        <guimenuitem>Отображать нижнюю часть окна</guimenuitem>
                        -- вызов этого действия отображает либо скрывает нижнюю часть главного окна с областью
                        ввода-вывода
                    </para></listitem>
                    <listitem><para>
                        <guimenuitem>Практикум</guimenuitem>
                        -- отображат дополнительное окно <emphasis role="italic">практикума</emphasis>.
                    </para></listitem>
                </orderedlist>
            </para>
        </section>
        <section>
            <title>Меню &quot;Практикум&quot;</title>
            <para>TODO: Написать!!!</para>
        </section>
        <section>
            <title>Меню &quot;Инфо&quot;</title>
            <para>
                Меню <guimenu>Инфо</guimenu> (сокращение от &quot;Информация&quot;) содержит элементы, вызов которых
                приводит к отображению информационных окон:
                <orderedlist>
                    <listitem>
                        <para><guimenuitem>Справочные руководства</guimenuitem>
                            -- дополнительное окно системы с навигацией по доступным справочным руководствам
                        </para>
                    </listitem>
                    <listitem>
                        <para><guimenuitem>Текущие значения величин</guimenuitem>
                            -- в режиме паузы отображает значения величин, используемых в программе
                        </para>
                    </listitem>
                    <listitem><para>
                        <guimenuitem>О программе</guimenuitem>
                        -- отображает диалог со сведениями о системе &quot;Кумир&quot;.
                    </para></listitem>
                </orderedlist>
            </para>
        </section>
    </section>
    <section>
        <title>Кнопки главного окна</title>
        <para>
            Сверху от редактора находится панель кнопок, которые дублируют часто используемые действия
            главного меню. При наведении курсора мыши на одну из этих кнопок, отображается всплывающая подсказка,
            содержащая название действия, и, при наличии -- комбинацию клавиш, которая вызывает данное действие.
        </para>
        <para>
            Внешний вид этих кнопок -- плоский, однако кнопка действия <guimenuitem>Программа&rarr;Сохранить программу</guimenuitem>
            изменяет свой внешний вид в том случае, если редактируемая программа была изменена, но еще не сохранена.
        </para>
        <para>В левой части строки состояния главного окна находятся следующие кнопки (слева направо):
            <orderedlist>
                <listitem><para>
                    <guimenuitem>Отображать нижнюю часть окна</guimenuitem>
                    -- дубрирует соответствующий пункт меню <guimenu>Окна</guimenu>
                </para></listitem>
                <listitem><para>
                    <guimenuitem>Сохранить вывод</guimenuitem>
                    -- отображает всплывающее меню сохранения содержимого окна ввода-вывода
                </para></listitem>
                <listitem><para>
                    <guimenuitem>Скопировать вывод в буфер обмена</guimenuitem>
                    -- отображает всплывающее меню копирования содержимого окна ввода-вывода в буфер обмена
                </para></listitem>
                <listitem><para>
                    <guimenuitem>Очистить область ввода-вывода</guimenuitem>
                    -- эта кнопка становится доступной только при наличии текста в области ввода-вывода;
                    ее нажатие приводит к очистке данной области.
                </para></listitem>
            </orderedlist>
        </para>
    </section>
    <section>
        <title>Открытие нескольких файлов в отдельных вкладках</title>
        <para>
            Структура главного окна конфигураций системы &quot;Кумир&quot; <emphasis role="bold">Профессиональная</emphasis>
            и <emphasis role="bold">Для учителей</emphasis> немного отличается от вышеописанного.
            <mediaobject>
                <imageobject>
                    <imagedata format="PNG" fileref="kumir-ide-mainwindow.png"/>
                </imageobject>
                <imageobject>
                    <imagedata format="PDF" fileref="kumir-ide-mainwindow.pdf"/>
                </imageobject>
                <caption>Главное окно системы Кумир с поддержкой открытия нескольких файлов</caption>
            </mediaobject>
        </para>
        <para>
            Между главным меню системы и областю редактирования находится <emphasis role="italic">панель переключения
        между открытыми документами</emphasis>, визуально реализованная как панель с вкладками.
        </para>
        <para>
            Все вкладки, за исключением специальной -- <emphasis role="italic">стартовой</emphasis>, имеют кнопку
            закрытия справа от заголовка.
        </para>
        <para>
            Слева от заголовка отображается номер вкладки от 1 до 9 для быстрого доступа с помощью клавиатурного
            сочетания:
            <keycombo><keysym>Ctrl+1..9</keysym></keycombo>, где <code>1..9</code> -- это номер вкладки.
            Доступ к стартовой вкладке обеспечивается комбинацией клавиш
            <keycombo><keysym>Ctrl+~</keysym></keycombo>.
        </para>
    </section>
</chapter>