<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
        "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
        []>
<chapter xmlns="http://www.oasis-open.org/docbook/xml/4.5/">
    <title>Структура программы</title>
    <section>
        <title>Программа</title>
        <section>
            <title>Общие сведения</title>
            <para>
                Основная структурная единица языка КуМир --<emphasis>алгоритм</emphasis>.
                Программа на языке КуМир в простейшем случае состоит из нескольких алгоритмов, следующих один за другим.
                Перед первым алгоритмом может располагаться
                <emphasis>вступление</emphasis>
                -- любая неветвящаяся
                последовательность команд. Например, это могут быть строки с комментариями, описаниями
                общих величин программы, командами присваивания им начальных значений.
            </para>
            <para>
                Алгоритмы в программе должны располагаться вплотную друг к другу, между ними
                могут быть только пустые строки и строки с комментариями.
            </para>
        </section>
        <section>
            <title>Выполнение программы</title>
            <para>
                Выполнение программы состоит в выполнении вступления, если оно присутствует, а затем --
                первого алгоритма (он называется<emphasis>основным алгоритмом программы</emphasis>). Остальные алгоритмы
                будут выполняться при вызове из первого алгоритма или из других ранее вызванных алгоритмов.
            </para>
            <example>
                <title>Программа со вступление, основным алгоритмом без имени и вспомогательным алгоритмом</title>
                <programlisting role="kumir"><![CDATA[
| Это вступление
цел длина, ширина
длина := 10
ширина := 15
| Это - основной алгоритм.
| У него может не быть имени
алг
нач
  вывод ”Площадь равна ”, площадь
кон
| Это - вспомогательный алгоритм.
| При выполнении он вызывается из основного.
| У вспомогательного алгоритма обязательно
| должно быть имя и могут быть параметры.
алг цел площадь
нач
  знач := длина*ширина
кон]]>
                </programlisting>
            </example>
            <example>
                <title>Программа со вступление, основным алгоритмом и вспомогательным алгоритмом</title>
                <programlisting role="kumir"><![CDATA[
| Это вступление
вещ длина, ширина, масса
длина := 10
ширина := 15
алг
нач
  вещ S
  S := площадь
  вещ плотность, масса
  плотность := 6.8 | г/см**2
  найти массу пластинки(плотность, S, масса)
  вывод ”Масса пластинки равна ”, масса
кон

| Это - вспомогательный алгоритм.
| При выполнении он вызывается из основного алгоритма.
| У вспомогательного алгоритма
| обязательно должно быть имя.
алг вещ площадь
нач
  знач := длина*ширина
кон

| Это - еще один вспомогательный алгоритм.
| При выполнении он вызывается из
| другого вспомогательного алгоритма.
| У вспомогательного алгоритма
| обязательно должно быть имя.
| У вспомогательного алгоритма могут быть параметры
алг найти массу пластинки(арг вещ p, S, рез вещ m)
нач
  m := p*S
кон]]>
                </programlisting>
            </example>
        </section>
    </section>
    <section>
        <title>Описание алгоритма</title>
        <section>
            <title>Общий вид описания</title>
            <para>Алгоритм на языку Кумир записывается в следующем виде:</para>
            <programlisting role="kumir"><![CDATA[
алг тип_алгоритма имя_алгоритма (описание_параметров)
  дано условие_применимости_алгоритма
  надо цель_выполнения_алгоритма
нач
  последовательность команд
кон]]>
            </programlisting>
            <para>
                Описание алгоритма состоит из:
                <itemizedlist>
                    <listitem>
                        <para>заголовка (часть до служебного слова нач);</para>
                    </listitem>
                    <listitem>
                        <para>тела алгоритма (часть между словами нач и кон).</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section>
            <title>Алгоритмы-процедуры и алгоритмы-функции</title>
            <para>
                Алгоритмы делятся на
                <emphasis>алгоритмы-процедуры</emphasis>
                и<emphasis>алгоритмы-функции</emphasis>.
                Алгоритм-функция после выполнения возвращает значение-результат. Правила описания алгоритмов-процедур
                и алгоритмов-функций имеют два отличия.
            </para>
            <para>
                Во-первых, для алгоритмов-функций на месте тип_алгоритма должен быть указан
                один из простых типов алгоритмического языка (вещ, цел и&nbsp;т.&nbsp;д.), определяющий тип
                значений, которые принимает данная функция. Для алгоритмов-процедур тип_алгоритма
                должен быть опущен.
            </para>
            <para>
                Во-вторых, в теле алгоритма-функции необходимо использовать служебную величину знач,
                в которую записывается вычисленное значение функции. В теле алгоритма-процедуры величину
                знач использовать нельзя.
            </para>
            <para>
                Алгоритмы-функции и алгоритмы-процедуры отличаются также по способу вызова<xref linkend="aaa"/>.
            </para>
            <example>
                <title>Пример алгоритма-процедуры</title>
                <programlisting role="kumir"><![CDATA[
алг гипотенуза (вещ a, b, рез вещ c)
  дано a>=0 и b>=0 | длины катетов треугольника
  надо | c = длинa гипотенузы этого треугольника
нач
  c := sqrt( a**2 + b**2 )
кон]]>
                </programlisting>
            </example>
            <example>
                <title>Пример алгоритма-функции</title>
                <programlisting><![CDATA[
алг вещ площадь (вещ a, b, c)
  дано a>=0 и b>=0 и c>=0 | длины сторон треугольника
  надо | значение функции равно площади этого треугольника
нач
  вещ p | полупериметр
  p := (a+b+c)/2
  знач := sqrt(p*(p-a)*(p-b)*(p-c))
кон]]>
                </programlisting>
            </example>
        </section>
    </section>
    <section>
        <title>Параметры алгоритма</title>
    </section>
    <section>
        <title>Команды и строки</title>
        <section>
            <title>Использование точки с запятой</title>
        </section>
        <section>
            <title>Неявные переносы строк</title>
        </section>
    </section>
    <section>
        <title>Комментарии</title>
    </section>
</chapter>
