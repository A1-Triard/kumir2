# Информация для мэйнтейнеров пакета в Linux-дистрибутивах

## Пререквизиты
 - Современный дистрибутив с актуальной версией компилятора (минимум gcc 4.8)
 - На выбор: Qt>= 4.8 или >= 5.3
 - Python >= 3.2
 - CMake >= 3.0

## Рекомендации по именованию версий и структуре пакетов
### Стабильные версии и текущая версия
Стабильные версии - это только те, для которых в VCS git предусмотрены теги, например, `2.1.0-rc7`. 
Если склонировать из этого репозитория, то во время сборки этот номер версии будет отображаться в "Инфо->О программе".

Текущая версия - в ветке `master`. Стабильность никто не гарантирует.

Более того, никто не гарантирует, что будет что-то работать, если смешивать часть компонент из стабильной и текущей версий.
Во избежание этого, лучше делать два разных пакета, например 'kumir2' и 'kumir2-unstable' у которых в зависимостях явно
прописано, что они не могут быть установлены одновременно.

### Пакет для разработчиков
У нас теперь появилась возможность сборки сторонних плагинов, не используя дерево исходных текстов Кумир.
Следующие файлы и каталоги нужно вынести в пакет `-devel`:
 - `/usr/include/kumir2`
 - `/usr/include/kumir2-libs`
 - `/usr/lib64/kumir2/gen_actor_source.py`
 - `/usr/lib64/cmake/Kumir2`
 
### Пакеты сторонних разработчиков
Все, что находится вне этого репозитория - не наше, и мы знать не знаем, что это такое.
Поэтому все сторонние плагины к Кумир-2 нужно упаковывать в отдельные пакеты, и называть их как-нибудь, чтобы это было понятно, что 
является сторонним продуктом, например, с префиксом или суффиксом `addon`.

## Какую версию Qt использовать?
В настоящее время [пока ещё] рекомендуется использовать Qt4, так как GUI лучше протестировано на реальных пользователях. 
Но в какой-то момент мы откажемся от поддержки Qt4 в пользу Qt5.

## Порядок сборки
С Qt4:
```
mkdir build && cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
sudo make install
```

С Qt5:
```
mkdir build && cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr -DUSE_QT=5 ..
make
sudo make install
```

Внимание! Перед упаковкой поставки, обязательно убедитесь, что install root (в данном случае - /usr) совпадает со значением 
переменной `KUMIR2_ROOT` в файле `/usr/lib64/cmake/Kumir2/distribution_build_config.cmake`. При необходимости - измените только этот файл. 
В противном случае, `-devel` не будет работать.
